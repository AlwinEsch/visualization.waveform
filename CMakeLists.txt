PROJECT(visualization.waveform)

CMAKE_MINIMUM_REQUIRED(VERSION 2.6)

set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} ${PROJECT_SOURCE_DIR})

FIND_PACKAGE(xbmc REQUIRED)
addon_version(visualization.waveform WAVEFORM)

IF(WIN32)
  INCLUDE_DIRECTORIES(${XBMC_INCLUDE_DIR})
ELSE(WIN32)
  FIND_PACKAGE(OpenGL REQUIRED)
  FIND_PACKAGE(GLEW REQUIRED)
  ADD_DEFINITIONS(-DHAS_SDL_OPENGL)
  INCLUDE_DIRECTORIES(${OpenGL_INCLUDE_DIR}
                      ${GLEW_INCLUDE_DIR}
                      ${XBMC_INCLUDE_DIR})
  SET(DEPLIBS ${OPENGL_LIBRARIES} ${GLEW_LIBRARIES})
ENDIF(WIN32)

SET(SOURCES src/Main.cpp)

build_addon(visualization.waveform SOURCES DEPLIBS WAVEFORM_VERSION)

install_addon(visualization.waveform ${WAVEFORM_VERSION})
